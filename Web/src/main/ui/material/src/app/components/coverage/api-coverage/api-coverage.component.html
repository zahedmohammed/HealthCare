<div class="box box-default">
  <div>
    <article>
      <section class="container-fluid with-maxwidth no-breadcrumbs chapter">
        <a href="javascript:;" [routerLink]="['/app/projects', id, 'jobs']"> {{project.name}} </a>
        &nbsp;<span class="text-muted">&nbsp;<i class="fa fa-chevron-right"></i>&nbsp;</span> &nbsp;Coverage
      </section>
    </article>
  </div>
</div>
<br/>
<section class="container-fluid with-maxwidth chapter">
  <nav mat-tab-nav-bar>
    <label mat-tab-link [routerLink]="['/app/projects', project.id, 'jobs']">Jobs
    </label>
    <label mat-tab-link [routerLink]="['/app/projects', id, 'environments']">Environments
    </label>
    <label mat-tab-link [routerLink]="['/app/projects', id, 'test-suites']">Test Suites
    </label>
    <label mat-tab-link [active]="true">Coverage
    </label>
      <label mat-tab-link [routerLink]="['/app/projects', id, 'configuration']">AutoCode</label>
      <label mat-tab-link [routerLink]="['/app/projects', id, 'manage']">Git</label>
  </nav>
  <br/>

  <article class="article">

    <div class="mat-elevation-z8 box-default">
      <mat-table [dataSource]="dataSource" matSort matSortActive="modified-date" matSortDisableClear matSortDirection="desc">

        <!-- Category Column -->
        <ng-container matColumnDef="category">
          <mat-header-cell *matHeaderCellDef mat-sort-header> Category </mat-header-cell>
          <mat-cell *matCellDef="let element"> {{element.category}} </mat-cell>
        </ng-container>

        <ng-container matColumnDef="api-count">
          <mat-header-cell *matHeaderCellDef mat-sort-header> Relevant Endpoints </mat-header-cell>
          <mat-cell *matCellDef="let element"> {{element.totalEndpoints}} </mat-cell>
        </ng-container>

        <ng-container matColumnDef="ts-count">
          <mat-header-cell *matHeaderCellDef mat-sort-header> Covered Endpoints </mat-header-cell>
          <mat-cell *matCellDef="let element"> {{element.coveredEndpoints }} </mat-cell>
        </ng-container>


        <ng-container matColumnDef="coverage-percent">
          <mat-header-cell *matHeaderCellDef mat-sort-header>Coverage %</mat-header-cell>
<!--
          <mat-cell *matCellDef="let element"> {{element.coveredEndpoints * 100 / element.totalEndpoints | number:'.1-2'}} % <mat-progress-bar mode="determinate" color="accent" value={{element.coveragePercentage}}></mat-progress-bar> </mat-cell>
-->
            <mat-cell *matCellDef="let element"> {{element.coveragePercentage | number:'.1-2'}} % <mat-progress-bar mode="determinate" color="accent" value={{element.coveragePercentage}}></mat-progress-bar> </mat-cell>

        </ng-container>


        <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
        <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
      </mat-table>

      <mat-paginator [hidden]="length <= pageSize" [pageSize]="pageSize" hidePageSize="true" (page)="change($event)" [length]="length">
      </mat-paginator>
    </div>

    <br/>


 <!-- Accordian start -->
 <div class="mat-elevation-z8 box-default">

 <mat-accordion>
  <mat-expansion-panel>
      <mat-expansion-panel-header>
          <mat-panel-title>
              <p class="non-numeric text-muted">Total No. of API Endpoints in the project : {{ coverageDetails.totalEndpoints | number}}</p>
          </mat-panel-title>
      </mat-expansion-panel-header>
      <div class="mb-3">
      </div>
      <div class="col-md-12" *ngFor="let e of coverageDetails.endpoints">
          <div class="mb-3">
              <div class="callout callout-danger" *ngIf="e.method=='DELETE'">
                  <span class="button text-danger"><b>{{e.method}}</b></span>
                  <span class="opblock-summary-path">{{e.endpoint}}</span>
                </div>
                <div class="callout callout-success" *ngIf="e.method=='POST'">
                    <span class="button text-success"><b>{{e.method}}</b></span>
                    <span class="opblock-summary-path">{{e.endpoint}}</span>
                  </div> 
                  <div class="callout callout-warning " *ngIf="e.method=='PUT'">
                      <span class="button text-warning"><b>{{e.method}}</b></span>
                      <span class="opblock-summary-path">{{e.endpoint}}</span>
                    </div> 
                    <div class="callout callout-info" *ngIf="e.method=='GET'">
                        <span class="button text-info"><b>{{e.method}}</b></span>
                        <span class="opblock-summary-path">{{e.endpoint}}</span>
                      </div>
      
          </div>
      </div>
  </mat-expansion-panel>
</mat-accordion>
<mat-accordion>
  <mat-expansion-panel>
      <mat-expansion-panel-header>
          <mat-panel-title>
              <p class="non-numeric text-muted">No. of Test Suites auto generated : {{ coverageDetails.totalSuites | number }}</p>
          </mat-panel-title>
      </mat-expansion-panel-header>
      <div class="col-md-12" *ngFor="let cat of coverageDetails.countByCategory">
          <div class="mb-3">

              {{cat.groupBy}} : {{cat.count}}
          </div>
      </div>
  </mat-expansion-panel>
</mat-accordion>
<mat-accordion>
  <mat-expansion-panel>
      <mat-expansion-panel-header>
          <mat-panel-title>
              <p class="non-numeric text-muted">No. of test cases in all Test Suites generated : {{ coverageDetails.totalTestCases  | number}}</p>
          </mat-panel-title>
      </mat-expansion-panel-header>
      <div class="mb-3">
          Average {{ coverageDetails.totalTestCases / coverageDetails.totalSuites  | number }} test case(s) per test-suite
      </div>
  </mat-expansion-panel>
</mat-accordion>
<!-- Accordian end -->
</div>  
<br/>


    <div class="box box-default">

      <div class="row">
          <div class="col-md-6">
              <div class="box box-transparent">
                  <div class="divider divider-md"></div>
                  <div class="box-body">
                      <div *ngIf="byCatagory">
                          <canvas id="canvas1">{{ byCatagory }}</canvas>
                        </div>
                  </div>
                </div>
          </div>
          <div class="col-md-6">
              <div class="box box-transparent">
                  <!-- <div class="box-heading">By Category</div> -->
                  <div class="divider divider-md"></div>
                  <div class="box-body">
                      <div *ngIf="byMethod">
                          <canvas id="canvas2">{{ byMethod }}</canvas>
                        </div>
                  </div>
                </div>
            </div>
            <!-- <div class="col-md-4">
                <div class="box box-transparent">

                    <div class="divider divider-md"></div>
                    <div class="box-body">
                        <div *ngIf="bySeverity">
                            <canvas id="canvas3">{{ bySeverity }}</canvas>
                          </div>
                    </div>
                  </div>
            </div> -->


            </div>
            

    </div>
  </article>
</section>